@baseUrl = http://localhost:3000

### Health
GET {{baseUrl}}/health

############################################
### Auth
############################################

### Register
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "username": "eli",
  "email": "eli@example.com",
  "password": "1234",
  "bio": "Hello"
}

### Login (copy tokens from response)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "emailOrUsername": "eli",
  "password": "1234"
}

@accessToken = REPLACE_ME
@refreshToken = REPLACE_ME

### Refresh
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### Logout
POST {{baseUrl}}/auth/logout
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

############################################
### Users (CRUD)
############################################

### Create a user
POST {{baseUrl}}/users
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "username": "Meow",
  "email": "cookie@example.com",
  "password": "1234",
  "bio": "Eli here"
}

### Get all users
GET {{baseUrl}}/users
Authorization: Bearer {{accessToken}}

@userId = REPLACE_ME

### Get user by id
GET {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{accessToken}}

### Update user
PUT {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "bio": "Updated bio"
}

### Delete user
DELETE {{baseUrl}}/users/{{userId}}
Authorization: Bearer {{accessToken}}

############################################
### Posts (CRUD)
############################################

### Create post (logged-in user is the sender)
POST {{baseUrl}}/posts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "message": "Hello from my first post!"
}

@postId = REPLACE_ME

### Get all posts
GET {{baseUrl}}/posts

### Get posts by sender
GET {{baseUrl}}/posts?sender={{userId}}

### Get post by id
GET {{baseUrl}}/posts/{{postId}}

### Update post (owner only)
PUT {{baseUrl}}/posts/{{postId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "message": "Updated message"
}

### Delete post (owner only)
DELETE {{baseUrl}}/posts/{{postId}}
Authorization: Bearer {{accessToken}}

############################################
### Comments (CRUD)
############################################

### Add comment to post (logged-in user is the sender)
POST {{baseUrl}}/posts/{{postId}}/comments
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "message": "Nice post!"
}

### Get comments for a post
GET {{baseUrl}}/posts/{{postId}}/comments

### Get all comments
GET {{baseUrl}}/comments

@commentId = REPLACE_ME

### Get comment by id
GET {{baseUrl}}/comments/{{commentId}}

### Update comment (owner only)
PUT {{baseUrl}}/comments/{{commentId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "postId": "{{postId}}",
  "message": "Edited my comment"
}

### Delete comment (owner only)
DELETE {{baseUrl}}/comments/{{commentId}}
Authorization: Bearer {{accessToken}}
